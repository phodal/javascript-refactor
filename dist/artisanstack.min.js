/*! artisanstack 22-06-2015 */
!function(a,b){"use strict";function c(a,b){return a.replace(b[0],"<code>\n"+n(b[1]).replace(/\n/gm,"<br/>").replace(/\ /gm,"&nbsp;")+"</code>\n")}function d(a,b){var c=b[1].length;return a.replace(b[0],"<h"+c+">"+b[2]+"</h"+c+">\n")}function e(a,c){var d,e,f=0,g=[],h=c[0].split("\n"),i=0,j=!1,k=0,l=0;for(d="*"===c[0].trim().substr(0,1)||"-"===c[0].trim().substr(0,1)?"<ul>":"<ol>",e=0;e<h.length;e++)if(null!==(k=/^((\s*)((\*|\-)|\d(\.|\))) ([^\n]+))/.exec(h[e]))){for(k[2]===b||0===k[2].length?l=0:(j===!1&&(j=k[2].replace(/\t/,"    ").length),l=Math.round(k[2].replace(/\t/,"    ").length/j));i>l;)d+=g.pop(),i--,f--;for(;l>i;)"*"===k[0].trim().substr(0,1)||"-"===k[0].trim().substr(0,1)?(d+="<ul>",g.push("</ul>")):(d+="<ol>",g.push("</ol>")),i++,f++;d+="<li>"+k[6]+"</li>\n"}for(;f>0;)d+="</ul>",f--;return d+="*"===c[0].trim().substr(0,1)||"-"===c[0].trim().substr(0,1)?"</ul>":"</ol>",a.replace(c[0],d+"\n")}function f(a,b,c){var d,e,f="<table><tr>",g=b[1].split("|"),h=b[4].split("|");for(d=0;d<g.length;d++)h.length<=d?h.push(0):":"===h[d].trimRight().slice(-1)&&c!==!0?":"===h[d][0]?h[d]=3:h[d]=2:c!==!0&&":"===h[d][0]?h[d]=1:h[d]=0;var i=["<th>",'<th align="left">','<th align="right">','<th align="center">'];for(d=0;d<g.length;d++)f+=i[h[d]]+g[d].trim()+"</th>";f+="</tr>",i=["<td>",'<td align="left">','<td align="right">','<td align="center">'];var j=b[7].split("\n");for(d=0;d<j.length;d++){var k=j[d].split("|");if(0!==k[0].length){for(;h.length<k.length;)h.push(0);for(f+="<tr>",e=0;e<k.length;e++)f+=i[h[e]]+k[e].trim()+"</td>";f+="</tr>\n"}}return f+="</table>",a=a.replace(b[0],f)}function g(a,b){var c=[],d=[["<i>","</i>"],["<b>","</b>"],["<i><b>","</b></i>"]];return"~~"===b[1]?a=a.replace(b[0],"<del>"+b[2]+"</del>"):(c=d[b[1].length-1],a=a.replace(b[0],c[0]+b[2]+c[1])),a}function h(a,b,c){return a="!"===b[0].substr(0,1)?a.replace(b[0],'<img src="'+b[2]+'" alt="'+b[1]+'" title="'+b[1]+'" />\n'):a.replace(b[0],"<a "+o(b[2],c)+'href="'+b[2]+'">'+b[1]+"</a>\n")}function i(a,b){return a=a.replace(b[0],'<a href="mailto:'+b[1]+'">'+b[1]+"</a>")}function j(a,b,c){var d=b[1];return-1===d.indexOf("://")&&(d="http://"+d),a=a.replace(b[0],"<a "+o(d,c)+'href="'+d+'">'+d.replace(/(https:\/\/|http:\/\/|mailto:|ftp:\/\/)/gim,"")+"</a>")}function k(a,b,c){var d,e=[],f=new RegExp("\\["+b[2]+"\\]: ?([^ \n]+)","gi");return null!==(d=f.exec(a))&&(a=a.replace(b[0],"<a "+o(d[1],c)+'href="'+d[1]+'">'+b[1]+"</a>"),e.push(d[0])),{str:a,trashgc:e}}function l(a,b,c){var d={t:"https://twitter.com/",gh:"https://github.com/",fb:"https://www.facebook.com/",gp:"https://plus.google.com/+"},e=d[b[2]]+b[1];return a.replace(b[0],"<a "+o(e,c)+'href="'+e+'">'+b[1]+"</a>")}function m(a,b){return a.replace(b[0],"\n<hr/>\n")}function n(a){var b=document.createElement("div");return b.appendChild(document.createTextNode(a)),a=b.innerHTML}function o(a,b){var c;return-1!==a.indexOf("/")&&b!==!0?(c=a.split("/"),c=0===c[1].length?c[2].split("."):c[0].split("."),'class="mmd_'+c[c.length-2].replace(/[^\w\d]/g,"")+c[c.length-1]+'" '):""}function p(a,b){var n,o=[];for(a="\n"+a+"\n",b!==!0&&(r.lists=/^((\s*(\*|\d\.) [^\n]+)\n)+/gm);null!==(n=r.code.exec(a));)a=c(a,n);for(;null!==(n=r.headline.exec(a));)a=d(a,n);for(;null!==(n=r.lists.exec(a));)a=e(a,n);for(;null!==(n=r.tables.exec(a));)a=f(a,n,b);for(var p=0;3>p;p++)for(;null!==(n=r.boldItalic.exec(a));)a=g(a,n);for(;null!==(n=r.links.exec(a));)a=h(a,n,b);for(;null!==(n=r.mail.exec(a));)a=i(a,n);for(;null!==(n=r.url.exec(a));)a=j(a,n,b);for(;null!==(n=r.reflinks.exec(a));){var q=k(a,n,b);a=q.str,o=q.trashgc}for(p=0;p<o.length;p++)a=a.replace(o[p],"");for(;null!==(n=r.smlinks.exec(a));)a=l(a,n,b);for(;null!==(n=r.hr.exec(a));)a=m(a,n);return a.replace(/ {2,}[\n]{1,}/gim,"<br/><br/>")}var q=function(){};q.version=q.VERSION="0.0.0",a.ArtisanStack=q,q.md={};var r={headline:/^(\#{1,6})([^\#\n]+)$/m,code:/\s\`\`\`\n?([^`]+)\`\`\`/g,hr:/^(?:([\*\-_] ?)+)\1\1$/gm,lists:/^((\s*((\*|\-)|\d(\.|\))) [^\n]+)\n)+/gm,boldItalic:/(?:([\*_~]{1,3}))([^\*_~\n]+[^\*_~\s])\1/g,links:/!?\[([^\]<>]+)\]\(([^ \)<>]+)( "[^\(\)\"]+")?\)/g,reflinks:/\[([^\]]+)\]\[([^\]]+)\]/g,smlinks:/\@([a-z0-9]{3,})\@(t|gh|fb|gp|adn)/gi,mail:/<(([a-z0-9_\-\.])+\@([a-z0-9_\-\.])+\.([a-z]{2,7}))>/gim,tables:/\n(([^|\n]+ *\| *)+([^|\n]+\n))((:?\-+:?\|)+(:?\-+:?)*\n)((([^|\n]+ *\| *)+([^|\n]+)\n)+)/g,include:/[\[<]include (\S+) from (https?:\/\/[a-z0-9\.\-]+\.[a-z]{2,9}[a-z0-9\.\-\?\&\/]+)[\]>]/gi,url:/<([a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?)>/g};q.md.parse=p,q.md.addMarkdownClass=o}(this);